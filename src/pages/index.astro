---
import { getCollection } from 'astro:content';
import PageLayout from '../layouts/PageLayout.astro';
import PostCard from '../components/PostCard.astro';

const posts = (await getCollection('blog', ({ data }) => !data.draft))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 5);

const techStack = [
  { name: 'Python',     color: 'bg-blue-100  text-blue-800  dark:bg-blue-900/30  dark:text-blue-300' },
  { name: 'Java',       color: 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300' },
  { name: 'Go',         color: 'bg-cyan-100  text-cyan-800  dark:bg-cyan-900/30  dark:text-cyan-300' },
  { name: 'TypeScript', color: 'bg-blue-100  text-blue-800  dark:bg-blue-900/30  dark:text-blue-300' },
  { name: 'Kubernetes', color: 'bg-blue-100  text-blue-800  dark:bg-blue-900/30  dark:text-blue-300' },
  { name: 'Linux',      color: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300' },
  { name: 'AWS',        color: 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300' },
  { name: 'Docker',     color: 'bg-sky-100   text-sky-800   dark:bg-sky-900/30   dark:text-sky-300' },
];
---

<PageLayout title="Home">
  <div class="max-w-4xl mx-auto px-4 sm:px-6">

      <!-- Hero Section -->
      <section class="py-20 sm:py-28">
        <div class="flex flex-col sm:flex-row items-start gap-8">
          <div class="flex-1">
            <p class="text-accent-600 dark:text-accent-400 font-semibold text-sm tracking-wide uppercase mb-3">
              Software Engineer
            </p>
            <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 dark:text-gray-50 leading-tight mb-5">
              안녕하세요,<br/>
              <span class="text-accent-600 dark:text-accent-400">Youngjae Kwon</span>입니다.
            </h1>
            <p class="text-lg text-gray-600 dark:text-gray-400 leading-relaxed mb-8 max-w-xl">
              일본에서 일하는 소프트웨어 엔지니어입니다.<br/>
              일하면서 배운 것들을 기록하는 공간입니다.
            </p>
            <div class="flex flex-wrap gap-3">
              <a href="/blog" class="btn-primary">
                블로그 읽기
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </a>
              <a href="/about" class="btn-secondary">소개</a>
              <a
                href="https://github.com/idenrai"
                target="_blank"
                rel="noopener noreferrer"
                class="btn-secondary"
              >
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.009-.868-.013-1.703-2.782.604-3.369-1.34-3.369-1.34-.454-1.155-1.11-1.463-1.11-1.463-.908-.62.069-.607.069-.607 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.268 2.75 1.026A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.337 1.909-1.294 2.747-1.026 2.747-1.026.546 1.377.202 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.841-2.337 4.687-4.565 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.742 0 .267.18.578.688.48C19.138 20.163 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
                </svg>
                GitHub
              </a>
            </div>
          </div>

          <!-- 터미널 느낌의 데코 박스 -->
          <div class="hidden sm:block w-72 shrink-0">
            <div class="rounded-2xl border border-gray-200 dark:border-gray-700 bg-gray-950 dark:bg-gray-900 overflow-hidden shadow-2xl">
              <div class="flex items-center gap-1.5 px-4 py-3 border-b border-gray-800">
                <span class="w-3 h-3 rounded-full bg-red-500 opacity-80"></span>
                <span class="w-3 h-3 rounded-full bg-yellow-500 opacity-80"></span>
                <span class="w-3 h-3 rounded-full bg-green-500 opacity-80"></span>
              </div>
              <div class="p-5 font-mono text-sm text-gray-300">
                <p class="text-green-400">$ whoami</p>
                <p class="mt-1 text-gray-400">youngjae kwon</p>
                <p class="mt-3 text-green-400">$ cat interests.txt</p>
                <p class="mt-1 text-gray-400">- Backend &amp; Infra</p>
                <p class="text-gray-400">- Cloud / Kubernetes</p>
                <p class="text-gray-400">- Developer Tools</p>
                <p class="text-gray-400">- Language Learning</p>
                <p class="mt-3 text-green-400">$ <span class="animate-pulse">_</span></p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 기술 스택 -->
      <section class="pb-16">
        <h2 class="text-xs font-semibold text-gray-400 dark:text-gray-600 uppercase tracking-widest mb-4">
          Tech Stack
        </h2>
        <div class="flex flex-wrap gap-2">
          {techStack.map(({ name, color }) => (
            <span class={`inline-block px-3 py-1 rounded-lg text-sm font-medium ${color}`}>
              {name}
            </span>
          ))}
        </div>
      </section>

      <div class="w-full h-px bg-gray-100 dark:bg-gray-800 mb-16" />

      <!-- 최근 포스트 -->
      <section class="pb-20">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100">최근 포스트</h2>
          <a href="/blog" class="text-sm text-accent-600 dark:text-accent-400 hover:underline">
            전체 보기 →
          </a>
        </div>

        {posts.length > 0 ? (
          <div class="grid gap-4">
            {posts.map((post) => (
              <PostCard
                title={post.data.title}
                description={post.data.description}
                date={post.data.date}
                tags={post.data.tags}
                slug={post.slug}
              />
            ))}
          </div>
        ) : (
          <p class="text-gray-500 dark:text-gray-500 text-center py-12">
            아직 포스트가 없습니다.
          </p>
        )}
      </section>
    </div>
</PageLayout>
