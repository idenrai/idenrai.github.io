
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>Hadoop 完全分散モードでSetting</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">Hadoop 完全分散モードでSetting</h2>
                                <div class="box-info">
                                    <p class="category">Tech/Hadoop</p>
                                    <p class="date">2015-10-10 19:16:06</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;"><a href="http://qiita.com/YoungjaeKwon/items/e6e12a3a5158bc02d5b5" target="_blank" class="tx-link" style="color: rgb(107, 172, 206);">Qiita로 이동 (Qiitaの方へ移動)</a></p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;"><br /></p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;">언어 : 일본어</p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;">言語：日本語</p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;"><br /></p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;">마크다운으로 작성.</p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;">Markdownで作成。</p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;"><br /></p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;">여기엔 보관용으로 마크다운&nbsp;소스를&nbsp;그대로 올렸음.</p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;">ここには保存のため、Markdownのままで乗せました。</p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;"><br /></p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;">내용은 일단 Qiita쪽을 참조할 것.</p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;">内容については、上のQiitaの方を参考してください。</p><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;"><br /></p><span class="txt_fold">소스 보기</span>
<div class="moreless_content"><p style="margin-right: auto; margin-left: auto; padding-right: 0px; padding-left: 0px; font-size: 16px; line-height: 28px; color: rgb(92, 92, 92); font-family: &quot;Spoqa Han Sans&quot;, sans-serif; padding-top: 0px !important; padding-bottom: 0px !important;"><br /></p><p style="color: rgb(0, 0, 0);">初めてのHadoop</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);"># Hadoop</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">## Hadoopとは</p><p style="color: rgb(0, 0, 0);">- doopaH?</p><p style="color: rgb(0, 0, 0);">- 大容量のデータを分散処理できる、JAVA基盤のオープンソースフレイームワーク</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">### ビックデータの登場</p><p style="color: rgb(0, 0, 0);">- 今はビックデータ(3V：大きさVolume, 速度Velocity, 多様性Variety)の時代。</p><p style="color: rgb(0, 0, 0);">- 既存のデータ処理方法では、ビックデータを扱いにくい</p><p style="color: rgb(0, 0, 0);">&nbsp;- 既存の定形データはRDBMSでも保存できるが、否定形データまで保存するにはデータが大きすぎる</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">### Hadoop</p><p style="color: rgb(0, 0, 0);">- ビックデータを分散処理できるJAVA基板のOpenSourceFramework</p><p style="color: rgb(0, 0, 0);">- Googleが論文で発表した分散処理技術GFSとMap ReduceをDoug CuttingがJavaで具現</p><p style="color: rgb(0, 0, 0);">- 名前の由来は、Doug Cuttingの息子のおもちゃの名前</p><p style="color: rgb(0, 0, 0);">- 分散ファイルシステム **HDFS(Hadoop Distributed File System)**でデータを保存</p><p style="color: rgb(0, 0, 0);">- 分散処理システム **Map Reduce**でデータを処理</p><p style="color: rgb(0, 0, 0);">- Hadoop Echo System</p><p style="color: rgb(0, 0, 0);">&nbsp;- Hadoop Core Project : HDFS, Map Reduce</p><p style="color: rgb(0, 0, 0);">&nbsp;- Sub Project : Zookeeper, HBase, Hive, …</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">### なぜHadoopなのか？</p><p style="color: rgb(0, 0, 0);">- SWライセンス費用：OpenSourceプロジェクトで、ライセンス費用の負担がない</p><p style="color: rgb(0, 0, 0);">- エキップメント：高いUNIX装備を使わず、LINUXサーバーだけあれば運営できる</p><p style="color: rgb(0, 0, 0);">- 安定性：データの複製本を保存し、データの異質や障害の発生でも復旧可能</p><p style="color: rgb(0, 0, 0);">- 分散コンピューティング：複数のサーバーにデータを保存し、各サーバーで同時にデータを処理</p><p style="color: rgb(0, 0, 0);">&nbsp;- 130年分の新聞記事をHadoopを使って一日でPDF化。一般のサーバーだと14年分の作業量</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">## 環境構築手順</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">### 目標</p><p style="color: rgb(0, 0, 0);">- 完全分散モードでのHadoop設定と例題実行</p><p style="color: rgb(0, 0, 0);">- SettingをしながらのHDFSとMapReduceの構造を説明</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">### 基本設定</p><p style="color: rgb(0, 0, 0);">- 装置スペック</p><p style="color: rgb(0, 0, 0);">&nbsp;- CPU : i3-4000M 2.40GHz</p><p style="color: rgb(0, 0, 0);">&nbsp;- RAM : 4.0GB</p><p style="color: rgb(0, 0, 0);">&nbsp;- OS : Microsoft Windows 8.1 Enterprise K 64Bit</p><p style="color: rgb(0, 0, 0);">- 実行モード：完全分散(Fully Distributed)モード</p><p style="color: rgb(0, 0, 0);">&nbsp;- ２つ以上の装置にHadoop環境を設定(ここではOracle VirtualBoxを使用)</p><p style="color: rgb(0, 0, 0);">&nbsp;- OS : CentOS-7.0</p><p style="color: rgb(0, 0, 0);">&nbsp;- Hadoopバージョン：1.2.1</p><p style="color: rgb(0, 0, 0);">- サーバー構成(４つのサーバーを準備します)</p><p style="color: rgb(0, 0, 0);">&nbsp;- test01 : NameNode</p><p style="color: rgb(0, 0, 0);">&nbsp;- test02 : Secondary NameNode, DataNode</p><p style="color: rgb(0, 0, 0);">&nbsp;- test03 : DataNode</p><p style="color: rgb(0, 0, 0);">&nbsp;- test04 : DataNode</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">#### **※ Hadoopのモード**</p><p style="color: rgb(0, 0, 0);">- 独立モード：Local(Standalone) Mode</p><p style="color: rgb(0, 0, 0);">&nbsp;- Local Machineで実行</p><p style="color: rgb(0, 0, 0);">&nbsp;- 他ノードとの通信をしないので、HDFSとデモンを使わない。</p><p style="color: rgb(0, 0, 0);">&nbsp;- 独立的にMap Reduceのロジック開発に使います。</p><p style="color: rgb(0, 0, 0);">- 仮想分散モード：Psudo-Distributed Mode</p><p style="color: rgb(0, 0, 0);">&nbsp;- 一台の装置でクラスタを構成し、すべてのデモンを実行</p><p style="color: rgb(0, 0, 0);">&nbsp;- ローカルモードのUpgrade板</p><p style="color: rgb(0, 0, 0);">&nbsp;- Hadoopを勉強する時に有用です。</p><p style="color: rgb(0, 0, 0);">- 完全分散モードFully-Distributed Mode</p><p style="color: rgb(0, 0, 0);">&nbsp;- 多数の装置でクラスタを構成し、分散保存・分散演算のすべての機能を実行。</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">#### **※ HDFSの構造**</p><p style="color: rgb(0, 0, 0);">- **ブロック構造**のファイル・システム</p><p style="color: rgb(0, 0, 0);">&nbsp;- HDFSに保存されるファイルは64MBのブロックに分けられて、分散されたサーバーに保存されます。</p><p style="color: rgb(0, 0, 0);">&nbsp;- ex) 200MBのファイルがHDFSに保存される時は、64MB, 64MB, 64MB, 8MBの４つのブロックになリます。</p><p style="color: rgb(0, 0, 0);">- 保存する時は、**基本的にブロック当たり３つのコピー本を保存**</p><p style="color: rgb(0, 0, 0);">&nbsp;- 一つのサーバーに全てのブロックを入れるのではなく、多数のサーバーに分けて保存することで、安全性が高まります。</p><p style="color: rgb(0, 0, 0);">&nbsp;- ex) 上の例のブロック１～４をDataNodeに保存するとしたら、DataNode1[1, 3, 4], DataNode2[1, 2, 3], DataNode3[2, 3, 4], DataNode4[1, 2, 4]みたいな形で分散。</p><p style="color: rgb(0, 0, 0);">- Master-Slaveアーキテクチャ</p><p style="color: rgb(0, 0, 0);">&nbsp;- NameNode（Master Server）：ファイルシステムの維持のためのメタデータを管理、データノードモニタリング、ブロック管理、クライエントの要求を受け取る</p><p style="color: rgb(0, 0, 0);">&nbsp;- DataNode（Slave Server）：クライエントがHDFSに保存するファイルを**メタデータ**（ファイル名・ファイル生成日など）と**ローデータ**（実際のデータ）に分けて、ローカルディスクに保存</p><p style="color: rgb(0, 0, 0);">&nbsp;- Secondary NameNode（Checkpointing Server）：NameNodeのメタデータのFile System Imageを周期的（基本１時間）に更新し、NameNodeの負担を軽くします。</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">### Linux Serverの準備</p><p style="color: rgb(0, 0, 0);">- 下準備</p><p style="color: rgb(0, 0, 0);">&nbsp;- [Oracle VM Virtualbox](https://www.virtualbox.org/wiki/Downloads)</p><p style="color: rgb(0, 0, 0);">&nbsp;- [CentOS](https://www.centos.org/download/)</p><p style="color: rgb(0, 0, 0);">- VM生成</p><p style="color: rgb(0, 0, 0);">&nbsp;- VirtualBoxをインストールしたら、新規をクリック</p><p style="color: rgb(0, 0, 0);">&nbsp; - 名前 : test01</p><p style="color: rgb(0, 0, 0);">&nbsp; - タイプ : Linux</p><p style="color: rgb(0, 0, 0);">&nbsp; - バージョン : Other Linux (64bit)</p><p style="color: rgb(0, 0, 0);">&nbsp;- メモリーサイズ : 512MB</p><p style="color: rgb(0, 0, 0);">&nbsp;- ハードタイプ : 仮想ハードドライブを作成する</p><p style="color: rgb(0, 0, 0);">&nbsp; - ハードドライブのファイルタイプ : VMDK(Virtual Machine Disk)</p><p style="color: rgb(0, 0, 0);">&nbsp; - ストレージ : 可変サイズ (4GB以上)</p><p style="color: rgb(0, 0, 0);">- CentOS インストール</p><p style="color: rgb(0, 0, 0);">&nbsp;- Test this media and Install CentOS</p><p style="color: rgb(0, 0, 0);">&nbsp; - 後、インストール画面が出たら、言語を設定し、後のインストールも進めます。</p><p style="color: rgb(0, 0, 0);">&nbsp;- Network設定</p><p style="color: rgb(0, 0, 0);">&nbsp; - ネットワークをONにして、Host名は上の通り、test01にします。</p><p style="color: rgb(0, 0, 0);">&nbsp;- インストール中にRoot暗号やユーザ設定をします。</p><p style="color: rgb(0, 0, 0);">&nbsp; - ここではRoot暗号をrootにしておきます。</p><p style="color: rgb(0, 0, 0);">- インストールが全部できたら、再起動を押します。</p><p style="color: rgb(0, 0, 0);">- もしここでインストールができなかったら、それはまだ３２－６４ビット設定ができてないからです。</p><p style="color: rgb(0, 0, 0);">&nbsp;- CMOSで、Advanced - CPUに入り、VirtualizationをEnabledに変更します。</p><p style="color: rgb(0, 0, 0);">- この作業を４回繰り返すと、Hadoopテストのサーバーは準備完了です。</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">### CentOSの設定</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">#### CentOS Update ＆ wget Install</p><p style="color: rgb(0, 0, 0);">- Update</p><p style="color: rgb(0, 0, 0);">&nbsp;- [root@test01 ~]$ **yum update**</p><p style="color: rgb(0, 0, 0);">- wgetインストール可能確認</p><p style="color: rgb(0, 0, 0);">&nbsp;- [root@test01 ~]$ **yum info wget**</p><p style="color: rgb(0, 0, 0);">- wgetインストール</p><p style="color: rgb(0, 0, 0);">&nbsp;- [root@test01 ~]$ **yum install wget -y**</p><p style="color: rgb(0, 0, 0);">- GUIモード設置</p><p style="color: rgb(0, 0, 0);">&nbsp;- [root@test01 ~]$ **yum groupinstall "base"**</p><p style="color: rgb(0, 0, 0);">&nbsp;- [root@test01 ~]$ **yum -y groups install "GNOME Desktop"**</p><p style="color: rgb(0, 0, 0);">&nbsp;- [root@test01 ~]$ **startx**</p><p style="color: rgb(0, 0, 0);">&nbsp;- 今後からはGUI環境で実行します。</p><p style="color: rgb(0, 0, 0);"><br /></p><p style="color: rgb(0, 0, 0);">#### JDK Install</p><p style="color: rgb(0, 0, 0);">- Hadoopを使うには、必ずJavaが必要ですので、JDKをインストールします。</p><p style="color: rgb(0, 0, 0);">- ここまで来たらmopenjdkがもう設置されていますが、ここではOracle JDKをインストールするようにします。</p><p style="color: rgb(0, 0, 0);">- 今設置されているJDKのVersion確認</p><p style="color: rgb(0, 0, 0);">&nbsp;- [root@test01 ~]$ **rpm -qa </div><p><br /></p><p><br /></p><p><figure class="fileblock" data-ke-align="alignCenter">
    <a href="./file/参考資料_151009.xlsx" class="">
        <div class="image"></div>
        <div class="desc">
            <div class="filename">
                <span class="name">参考資料_151009.xlsx</span>
            </div>
            <div class="size">다운로드</div>
        </div>
    </a>
</figure></p><p><br /></p>
                        </div>
                        <br/>
                        <div class="tags">
                            
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
