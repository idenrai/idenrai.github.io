
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>Requests & BeautifulSoup 기본기</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">Requests & BeautifulSoup 기본기</h2>
                                <div class="box-info">
                                    <p class="category">Tech/Python</p>
                                    <p class="date">2022-06-03 19:50:25</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <h1>Requests&amp;BeautifulSoup</h1>
<h2>Requests</h2>
<h3>Requests get() method</h3>
<pre><code>import requests</code></pre><pre><code>response = requests.get(&quot;https://www.naver.com/&quot;)</code></pre><pre><code>response.status_code</code></pre><pre><code>200</code></pre><p>Response 출력</p>
<pre><code>response.text</code></pre><p>Response를 바이너리 데이터로 출력</p>
<pre><code>response.content</code></pre><p>Response의 인코딩 확인</p>
<pre><code>response.encoding</code></pre><pre><code>&#39;UTF-8&#39;</code></pre><p>Response의 Header확인</p>
<pre><code>response.headers</code></pre><pre><code>{&#39;Server&#39;: &#39;NWS&#39;, &#39;Content-Type&#39;: &#39;text/html; charset=UTF-8&#39;, &#39;Cache-Control&#39;: &#39;no-cache, no-store, must-revalidate&#39;, &#39;Pragma&#39;: &#39;no-cache&#39;, &#39;P3P&#39;: &#39;CP=&quot;CAO DSP CURa ADMa TAIa PSAa OUR LAW STP PHY ONL UNI PUR FIN COM NAV INT DEM STA PRE&quot;&#39;, &#39;X-Frame-Options&#39;: &#39;DENY&#39;, &#39;X-XSS-Protection&#39;: &#39;1; mode=block&#39;, &#39;Strict-Transport-Security&#39;: &#39;max-age=63072000; includeSubdomains&#39;, &#39;Referrer-Policy&#39;: &#39;unsafe-url&#39;, &#39;Content-Encoding&#39;: &#39;gzip&#39;, &#39;Content-Length&#39;: &#39;37474&#39;, &#39;Date&#39;: &#39;Fri, 03 Jun 2022 08:27:30 GMT&#39;, &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;Vary&#39;: &#39;Accept-Encoding&#39;}</code></pre><p>Key와 Value나누기</p>
<pre><code>for key, val in response.headers.items():
    print(key, &quot; : &quot;, val)</code></pre><pre><code>Server  :  NWS
Content-Type  :  text/html; charset=UTF-8
Cache-Control  :  no-cache, no-store, must-revalidate
Pragma  :  no-cache
P3P  :  CP=&quot;CAO DSP CURa ADMa TAIa PSAa OUR LAW STP PHY ONL UNI PUR FIN COM NAV INT DEM STA PRE&quot;
X-Frame-Options  :  DENY
X-XSS-Protection  :  1; mode=block
Strict-Transport-Security  :  max-age=63072000; includeSubdomains
Referrer-Policy  :  unsafe-url
Content-Encoding  :  gzip
Content-Length  :  37474
Date  :  Fri, 03 Jun 2022 08:27:30 GMT
Connection  :  keep-alive
Vary  :  Accept-Encoding</code></pre><p>Cookie 속성 확인</p>
<pre><code>response.cookies</code></pre><pre><code>&lt;RequestsCookieJar[]&gt;</code></pre><h3>Google에 검색어를 Parameter로 넘겨 검색결과 받아오기</h3>
<pre><code>param = {&quot;q&quot;: &quot;python requests&quot;}</code></pre><pre><code>response = requests.get(&quot;https://www.google.com/search&quot;, params=param)</code></pre><pre><code>response.text</code></pre><h2>BeautifulSoup</h2>
<p>BeautifulSoup(해석 대상의 HTML/XML, 이용할 Parser)</p>
<h3>Beautiful Soup의 정보 추출 방법</h3>
<ul>
<li>HTML계층을 이동시켜, HTML태그에 해당가는 부분을 검색</li>
<li>find, find_all 등의 메소드를 통해, HTML태그에 해당하는 부분 검색</li>
<li>select 메소드를 통해 CSS셀렉터 특정 등</li>
</ul>
<h3>Parser</h3>
<ul>
<li>&quot;html.parser&quot; Python HTML Parser : 추가 라이브러리 필요없음</li>
<li>&quot;lxml&quot; lxml HTML Parser : HTML 고속처리 가능</li>
<li>&quot;xml&quot; lxml XML Parser : XML 고속처리 가능</li>
<li>&quot;html5lib&quot; html5lib : HTML5 처리 가능</li>
</ul>
<p>lxml 설치<br><code>pip install lxml</code></p>
<pre><code>from bs4 import BeautifulSoup</code></pre><pre><code>response = requests.get(&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;ejkGb=KOR&amp;barcode=9788901259307&quot;)</code></pre><pre><code>html = response.text</code></pre><h3>Python HTML Parser</h3>
<pre><code>soup = BeautifulSoup(html, &quot;html.parser&quot;)</code></pre><pre><code>print(soup)</code></pre><p>title 태그 지정</p>
<pre><code>print(soup.html.head.title)</code></pre><pre><code>&lt;title&gt;운명을 바꾸는 부동산 투자 수업: 기초편 | 정태익 | 리더스북 - 교보문고&lt;/title&gt;</code></pre><p>아래와 같이 html.head부분을 떼고 간략하게도 가능.</p>
<pre><code>print(soup.title)</code></pre><pre><code>&lt;title&gt;운명을 바꾸는 부동산 투자 수업: 기초편 | 정태익 | 리더스북 - 교보문고&lt;/title&gt;</code></pre><p>태그 안의 텍스트만 표시</p>
<pre><code>print(soup.title.string)</code></pre><pre><code>운명을 바꾸는 부동산 투자 수업: 기초편 | 정태익 | 리더스북 - 교보문고</code></pre><p>태그만 표시</p>
<pre><code>print(soup.title.name)</code></pre><pre><code>title</code></pre><p>bs4의 tag object</p>
<pre><code>print(type(soup.title))</code></pre><pre><code>&lt;class &#39;bs4.element.Tag&#39;&gt;</code></pre><h3>find(), find_all()</h3>
<ul>
<li>find(검색할 HTML태그) : 최초의 1요소</li>
<li>find_all(검색할 HTML태그) : 모든 요소</li>
</ul>
<pre><code>print(soup.find_all(&quot;ul&quot;))</code></pre><pre><code>for tag in soup.find_all(&quot;ul&quot;):
    print(tag.prettify())</code></pre><h3>select()</h3>
<p>soup.select(&quot;CSS셀렉터&quot;) : 습득한 요소를 리스트로 표시</p>
<p>책 가격표시 셀렉터를 넣어서 아래와 같이 원하는 부분을 출력 가능하다.</p>
<pre><code>price = soup.select(&quot;#container &gt; div:nth-child(4) &gt; form &gt; div.box_detail_order &gt; div.box_detail_price &gt; ul &gt; li:nth-child(1) &gt; span.sell_price&quot;)

print(price[0])</code></pre><pre><code>&lt;span class=&quot;sell_price&quot; title=&quot;판매가&quot;&gt;&lt;strong&gt;15,120&lt;/strong&gt;원&lt;/span&gt;</code></pre><pre><code>price[0].attrs[&quot;title&quot;]</code></pre><pre><code>&#39;판매가&#39;</code></pre><pre><code>price[0].contents[0].string</code></pre><pre><code>&#39;15,120&#39;</code></pre>
                        </div>
                        <br/>
                        <div class="tags">
                            #Python #Beautifulsoup #Requests #scraping 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
