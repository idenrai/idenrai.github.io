
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>Datatables 설정 도중, fnCreateRow에서의 Button추가</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">Datatables 설정 도중, fnCreateRow에서의 Button추가</h2>
                                <div class="box-info">
                                    <p class="category">Tech/jQuery DataTables</p>
                                    <p class="date">2016-10-13 12:12:04</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p>JQuery DataTables를 사용하는 도중,</p><p>테이블 내에 버튼을 만들어, 클릭 이벤트를 집어넣고 화면이동을 해야 했다.</p><p>보아하니&nbsp;fnCreateRow에서 각 줄의 td를 비우고 append로 Button을 추가할 수 있기에,</p><p>여기에도 적어두도록 한다.</p><p><br /></p><div class="colorscripter-code" style="color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#fafafa; border-radius:4px;" cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:6px; border-right:2px solid #e5e5e5"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#666; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">fnCreatedRow:&nbsp;<span style="color:#a71d5d">function</span>(nRow,&nbsp;aData,&nbsp;iDataIndex)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;$(nRow).attr(<span style="color:#63a35c">"data-json"</span>,&nbsp;JSON.stringify(aData));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;add&nbsp;button</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;$(nRow).find(<span style="color:#63a35c">'td'</span>).eq(<span style="color:#0099cc">5</span>).html(<span style="color:#63a35c">''</span>).append(<span style="color:#63a35c">'&lt;button&nbsp;class="btn&nbsp;btn-primary&nbsp;btnResult&nbsp;col-sm-6"&gt;'</span><span style="color:#a71d5d">+</span>표시<span style="color:#a71d5d">+</span><span style="color:#63a35c">'&lt;/button&gt;'</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;$(nRow).find(<span style="color:#63a35c">'td'</span>).eq(<span style="color:#0099cc">6</span>).html(<span style="color:#63a35c">''</span>).append(<span style="color:#63a35c">'&lt;button&nbsp;class="btn&nbsp;btn-primary&nbsp;btnProgress&nbsp;col-sm-6"&gt;'</span><span style="color:#a71d5d">+</span>입력<span style="color:#a71d5d">+</span><span style="color:#63a35c">'&lt;/button&gt;'</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color: rgb(229, 229, 229);">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="color: white;"><span style="font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;">cs</span></a></td></tr></tbody></table></div><p><br /></p><p>「eq」를 사용하여 td를 지정, 해당 td의 글자를 지우고 Button을 집어넣는 방식이다.</p><p>애초에 글자를 입력하지 않으면, 글자를 지울 필요도 없지 않느냐는 생각도 들었는데...</p><p>파라메터로 데이터를 받아, 그걸 column에 직접 data로 설정, 집어넣다 보니 공란을 집어넣을 방법이 없더라...</p><p>그래서 그냥 아무거나 집어넣고 html('')로 지우는 방법을 택했다.</p><p><br /></p><p>여기서 가장 중요한 것은,&nbsp;</p><p>eq를 통해 인덱스를 지정할 때엔, 보이는 td를 기준으로 인덱스를 정해야 한다는 것.</p><p>내 경우에는 위의 코드에서</p><p><br /></p><div class="colorscripter-code" style="color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><p></p><div class="colorscripter-code" style="overflow: auto; position: relative !important;"></div><p></p><p></p><div class="colorscripter-code" style="overflow: auto; position: relative !important;"></div><p></p><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#fafafa; border-radius:4px;" cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:6px; border-right:2px solid #e5e5e5"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#666; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">columnDefs:&nbsp;[</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;hide&nbsp;id(first&nbsp;column)</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;targets:&nbsp;[<span style="color:#0099cc">0</span>],</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;visible:&nbsp;<span style="color:#0099cc">false</span>,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;searchable:&nbsp;<span style="color:#0099cc">false</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{targets:&nbsp;[<span style="color:#0099cc">1</span>],&nbsp;width:&nbsp;<span style="color:#63a35c">"150px"</span>},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{targets:&nbsp;[<span style="color:#0099cc">2</span>],&nbsp;width:&nbsp;<span style="color:#63a35c">"150px"</span>},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{targets:&nbsp;[<span style="color:#0099cc">3</span>],&nbsp;width:&nbsp;<span style="color:#63a35c">"100px"</span>},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{targets:&nbsp;[<span style="color:#0099cc">4</span>],&nbsp;width:&nbsp;<span style="color:#63a35c">"150px"</span>},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{targets:&nbsp;[<span style="color:#0099cc">5</span>],&nbsp;width:&nbsp;<span style="color:#63a35c">"150px"</span>},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{targets:&nbsp;[<span style="color:#0099cc">6</span>],&nbsp;width:&nbsp;<span style="color:#63a35c">"125px"</span>},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{targets:&nbsp;[<span style="color:#0099cc">7</span>],&nbsp;width:&nbsp;<span style="color:#63a35c">"125px"</span>},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;{targets:&nbsp;[<span style="color:#0099cc">8</span>],&nbsp;width:&nbsp;<span style="color:#63a35c">"125px"</span>}</div><div style="padding:0 6px; white-space:pre; line-height:130%">],</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#e5e5e5; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#e5e5e5; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></tbody></table></div><p><br /></p><p>이와 같이 첫 번째 column은 visible을 false로 하여, 표시되지 않도록 하였는데...</p><p>이 column을 생각하여 button입력 td를 6,7로 잡았더니 7,8에 button이 들어가더라.</p><p><br /></p><p>참고로, 마지막 column에 버튼을 넣고 싶다면,</p><p>eq대신 find('td:last')를 쓰면 된다.</p><p><br /></p><p>아래와 같이, href를 설정하여 데이터를 parameter로 넘길 수도 있다.</p><p><br /></p><div class="colorscripter-code" style="color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#fafafa; border-radius:4px;" cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:6px; border-right:2px solid #e5e5e5"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#666; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">fnCreatedRow:&nbsp;<span style="color:#a71d5d">function</span>(nRow,&nbsp;aData,&nbsp;iDataIndex)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;$(nRow).attr(<span style="color:#63a35c">"data-json"</span>,&nbsp;JSON.stringify(aData));</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;add&nbsp;buttons</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;$(nRow).find(<span style="color:#63a35c">'td:last'</span>).html(<span style="color:#63a35c">''</span>).append(<span style="color:#63a35c">'&lt;a&nbsp;class="btn&nbsp;btn-primary&nbsp;btnGetList"&nbsp;href="/view/detail/'</span><span style="color:#a71d5d">+</span>aData.id<span style="color:#a71d5d">+</span><span style="color:#63a35c">'"&gt;'</span><span style="color:#a71d5d">+</span>상세<span style="color:#a71d5d">+</span><span style="color:#63a35c">'&lt;/button&gt;'</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color: rgb(229, 229, 229);">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="color: white;"><span style="font-size: 9px; word-break: normal; background-color: rgb(229, 229, 229); border-radius: 10px; padding: 1px;">cs</span></a></td></tr></tbody></table></div><p><br /></p><p>그 후엔 뭐...</p><p>이런 식으로 router.js에서 page를 써서 잡아주면 된다.</p><p><br /></p><div class="colorscripter-code" style="color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><p></p><div class="colorscripter-code" style="overflow: auto; position: relative !important;"></div><p></p><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#fafafa; border-radius:4px;" cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:6px; border-right:2px solid #e5e5e5"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#666; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#010101; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">page(<span style="color:#63a35c">'view/detail/:id'</span>,&nbsp;<span style="color:#a71d5d">function</span>(ctx)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#a71d5d">var</span>&nbsp;param&nbsp;<span style="color:#a71d5d">=</span>&nbsp;{};</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;param.id&nbsp;<span style="color:#a71d5d">=</span>&nbsp;ctx.params.id;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#a71d5d">if</span>&nbsp;(<span style="color:#a71d5d">!</span>param.id)&nbsp;<span style="color:#a71d5d">return</span>&nbsp;notice.warning(<span style="color:#63a35c">'id&nbsp;not&nbsp;found'</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#a71d5d">if</span>&nbsp;(<span style="color:#a71d5d">!</span>detail)&nbsp;<span style="color:#a71d5d">return</span>&nbsp;notice.warning(<span style="color:#63a35c">'controller&nbsp;not&nbsp;found:'</span>&nbsp;<span style="color:#a71d5d">+</span>&nbsp;<span style="color:#63a35c">'detail'</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;Promise.resolve(param)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;.then(detail.show)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;.<span style="color:#a71d5d">catch</span>(error.show)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;;</div><div style="padding:0 6px; white-space:pre; line-height:130%">});</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#e5e5e5; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#e5e5e5; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></tbody></table></div><p><br /></p><p>href을 통해 해당 주소로 이동했을 경우,&nbsp;</p><p>미리 export해 둔&nbsp;detail module의 show function을 발동시키는 형식이다.</p><p>이 때는, parameter로 받아온 id도 같이 param으로 넘기도록 한다.</p><p><br /></p>
                        </div>
                        <br/>
                        <div class="tags">
                            #jQuery DataTables #fnCreateRow 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
