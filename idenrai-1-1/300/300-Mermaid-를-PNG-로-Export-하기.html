
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>Mermaid 를 PNG 로 Export 하기</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">Mermaid 를 PNG 로 Export 하기</h2>
                                <div class="box-info">
                                    <p class="category">Tech/Design</p>
                                    <p class="date">2025-06-17 16:25:35</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <h2 data-ke-size="size26">개요</h2>
<p data-ke-size="size16"><a href="https://github.com/mermaid-js/mermaid-cli">mermaid-cli</a> 를 이용하여, Mermaid 로 만든 차트를 PNG 파일로 출력하기</p>
<h2 data-ke-size="size26">상세</h2>
<p data-ke-size="size16">이전 포스팅에서 <a href="https://idenrai.tistory.com/293">Mermaid</a> 를 소개한 적이 있다.<br />현재 업무에서도 VSCode 를 이용하여 Mermaid 로 차트를 그리고 있는데, 한가지 문제가 있더라.</p>
<h3 data-ke-size="size23">문제점</h3>
<p data-ke-size="size16">차트가 길어질 경우, 스크린샷을 찍기가 힘들다.</p>
<p data-ke-size="size16"><a href="https://marketplace.visualstudio.com/items?itemName=bierner.markdown-mermaid">Markdown Preview Mermaid Support</a> 를 이용해서 작성한 차트의 프리뷰를 스크린샷으로 저장, 설계서 등에 붙여넣고 있는데 차트가 위아래로 길어지면 아무래도 한 화면에서 스크린샷을 찍기가 힘들어진다.</p>
<h3 data-ke-size="size23">해결책</h3>
<p data-ke-size="size16"><a href="https://github.com/mermaid-js/mermaid-cli">mermaid-cli</a> 를 이용하니 간단하게 해결 가능했다.</p>
<h4 data-ke-size="size20">설치</h4>
<p data-ke-size="size16">mermaid-js 의 부속품이므로, npm 으로 설치</p>
<pre class="css"><code>npm install -g @mermaid-js/mermaid-cli</code></pre>
<p data-ke-size="size16">node version 을 어느 정도 올려야 한다.<br />난 <code>v18.16.0</code> 이었기에 <a href="https://idenrai.tistory.com/258">nvm</a> 으로 버전을 그냥 latest 로 올려버렸다.</p>
<pre class="crmsh"><code>nvm install node
nvm use v24.2.0</code></pre>
<h4 data-ke-size="size20">실행</h4>
<p data-ke-size="size16">Mermaid 파일을 변환하는 방식이므로, 변환 대상의 확장자는 <code>.mmd</code>로 바꿔야 한다.</p>
<p data-ke-size="size16">기본적인 사용법은 아래와 같다.</p>
<pre class="xml"><code>mmdc -i &lt;변환할 파일명&gt; -o &lt;출력할 파일명&gt;</code></pre>
<p data-ke-size="size16">간단하게 png 파일을 출력하고 싶으면 아래와 같이 기재.</p>
<pre class="stylus"><code>mmdc -i input.mmd -o output.png</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<h4 style="color: #000000; text-align: start;" data-ke-size="size20">Example</h4>
<p data-ke-size="size16"><span style="background-color: #fafafa; color: #333333; text-align: start;">실제 사용예는 아래와 같다.</span></p>
<p data-ke-size="size16"><span style="background-color: #fafafa; color: #333333; text-align: start;">내용이 길기에 접어두었음.</span></p>
<p data-ke-size="size16">&nbsp;</p>
<div data-ke-type="moreLess" data-text-more="더보기" data-text-less="닫기">
<div class="moreless-content-ignore">
<p style="color: #333333; text-align: start;" data-ke-size="size16">s3_flowchart.mmd</p>
<pre class="sql" style="background-color: #f8f8f8; color: #383a42; text-align: start;"><code>flowchart TD
    direction TB

    %% 요소 정의
    START(처리 시작)

    subgraph 1.파라미터 설정
        A[파라미터 설정]
    end

    subgraph 2.파일 체크
        B{파일 존재 여부}
    end

    subgraph 3.파일 읽기
        C[데이터 읽기]
        D{파일 읽기 성공}
    end

    subgraph 4.데이터 투영
        E[데이터 투영]
        F{데이터 투영 성공}
    end

    subgraph 5.데이터 등록/갱신
        G[데이터 등록&middot;갱신]
        H{데이터 등록&middot;갱신 성공}
    end

    subgraph 6.에러 처리
        ERROR[에러 처리]
    end

    SUCCESS[성공]
    END(처리 종료)

    %% 메인 플로우
    START --&gt; A
    A --&gt; B
    B -- Yes --&gt; C
    B -- No --&gt; END
    C --&gt; D
    D -- Yes --&gt; E
    D -- No --&gt; ERROR
    E --&gt; F
    F -- Yes --&gt; G
    F -- No --&gt; ERROR
    G --&gt; H
    H -- Yes --&gt; SUCCESS
    H -- No --&gt; ERROR
    SUCCESS --&gt; END
    ERROR --&gt; END

    %% 스타일
    classDef success fill:#e6ffe6,stroke:#2ecc40,color:#2ecc40;
    classDef error fill:#ffe6e6,stroke:#e74c3c,color:#e74c3c;
    classDef warning fill:#fffbe6,stroke:#f1c40f,color:#b7950b;

    %% 클래스 정의
    class SUCCESS success;
    class ERROR error;
    class WARNING warning;</code></pre>
<p style="color: #333333; text-align: start;" data-ke-size="size16">&nbsp;</p>
<p style="color: #333333; text-align: start;" data-ke-size="size16">난 테마 변화 등 필요없이 그냥 있는 그대로 png 로 출력하기만 하면 되니, 아래와 같은 느낌</p>
<pre class="bash" style="background-color: #f8f8f8; color: #383a42; text-align: start;" data-ke-language="bash"><code>mmdc -i s3_flowchart2.mmd -o s3_flowchart2.png</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">출력 결과는 아래와 같다.</p>
<figure class="imageblock alignCenter" >
    <span data-lightbox="lightbox">
        <img src="./img/스크린샷 2025-06-17 16.29.47.png"  />
    </span>
    <figcaption></figcaption>
</figure></div>
</div>
<h4 data-ke-size="size20"><span style="font-size: 1.44em; font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'Apple SD Gothic Neo', Arial, sans-serif;">실패한 방법</span></h4>
<h4 data-ke-size="size20">Try 1 : Markdown PDF</h4>
<p data-ke-size="size16"><a href="https://marketplace.visualstudio.com/items?itemName=yzane.markdown-pdf">Markdown PDF</a> 를 사용해서 VSCode 에서 Markdown 파일을 PNG 등으로 Export 할 수 있긴 한데, Mermaid 가 프리뷰가 아니라 그냥 코드로 출력되는 현상이 발생한다.</p>
<p data-ke-size="size16"><a href="https://github.com/yzane/vscode-markdown-pdf/issues/312#issuecomment-2315955054">이런 식</a>으로 Mermaid Server 의 URL을 바꾸면 된다는데 난 안먹히더라.</p>
<h4 data-ke-size="size20">Try 2 : Obsidian</h4>
<p data-ke-size="size16"><a href="https://obsidian.md/">Obsidian</a> 을 통해 Markdown 파일을 pdf 로 Export 하는 방법도 있긴 한데, 이건 길어지면 페이지대로 짤린다.</p>
                        </div>
                        <br/>
                        <div class="tags">
                            #MMD #Mermaid #markdown 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
